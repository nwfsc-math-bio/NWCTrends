<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Standardized Trend Metrics for Salmonid Populations • NWCTrends</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Standardized Trend Metrics for Salmonid Populations">
<meta property="og:description" content="This is runs the standardized trends metrics used in the 2016 and 2020 5-year NWFSC Viability Reports for listed PNW salmonids. To run, type library(NWCTrends) and then NWCTrends_report().">
<meta property="og:image" content="https://nwfsc-math-bio.github.io/NWCTrends/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">NWCTrends</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.31</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Releases</li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.0" class="external-link">Version 1.0 2015 VR</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.25" class="external-link">Version 1.25 2020 VR</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.30" class="external-link">Version 1.30</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Viability PDFs

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2015_Status_Review_noaa_17015_DS1.pdf" class="external-link">Viability Report 2015 (PDF)</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2020_Viability_Report.pdf" class="external-link">Viability Report 2020 (PDF)</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/Methods.pdf" class="external-link">Methods (PDF)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nwfsc-math-bio/NWCTrends/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="nwctrends-">NWCTrends <img src="reference/figures/logo.png" align="right" style="padding: 10px"><a class="anchor" aria-label="anchor" href="#nwctrends-"></a>
</h1></div>
<p>This is runs the standardized trends metrics used in the 2015 and 2020 5-year NWFSC PNW Salmonid Viability Report which support the 5-year Status Reviews prepared by WRO.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install, install the <strong>devtools</strong> package (if needed) and then to install the latest release use:</p>
<pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nwfsc-math-bio/NWCTrends@*release"</span><span class="op">)</span></span></code></pre>
<p>To install an R package from Github, you need to be able to build an R package on your machine. If you are on Windows, that means you may need to install <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link">Rtools</a>. On a Mac, installation should work fine; you don’t need to install anything.</p>
<p>The default is to create an html file with the tables and figures. You can also select Word or PDF output. In order to create PDF files and tables, you also need to install <strong>tinytex</strong> if you do not have a TeX installation. Code to install <strong>tinytex</strong> is below.</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'tinytex'</span><span class="op">)</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html" class="external-link">install_tinytex</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="instructions-to-run-a-demo">Instructions to run a demo<a class="anchor" aria-label="anchor" href="#instructions-to-run-a-demo"></a>
</h2>
<p>To download a set of demo files, run the following code.</p>
<pre><code><span><span class="va">fpath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package<span class="op">=</span><span class="st">"NWCTrends"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">fpath</span>, <span class="st">"."</span>,recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
<p>This will create a folder called <code>extdata</code> in your directory.</p>
<p>To run a demo analysis and create a report, type</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nwfsc-math-bio.github.io/NWCTrends">NWCTrends</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/NWCTrends_report.html">NWCTrends_report</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>You will be asked to select a data file. If you do not have data, navigate to one of the .csv or .RData files in the <code>extdata</code> folder.</p>
<p>Here is an example of customizing a variety of features:</p>
<pre><code><span><span class="fu">NWCTrends</span><span class="fu">::</span><span class="fu"><a href="reference/NWCTrends_report.html">NWCTrends_report</a></span><span class="op">(</span>inputfile<span class="op">=</span><span class="st">"Data/CRchum2020.csv"</span>,</span>
<span>                            fit.min.year<span class="op">=</span><span class="fl">1949</span>, fit.max.year <span class="op">=</span> <span class="fl">2025</span>,</span>
<span>                            plot.min.year<span class="op">=</span><span class="fl">1980</span>, plot.max.year <span class="op">=</span> <span class="fl">2025</span>,</span>
<span>                            geomean.table.control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              min.year<span class="op">=</span><span class="fl">1990</span>, max.year<span class="op">=</span><span class="fl">2025</span>, lenbands<span class="op">=</span><span class="fl">5</span>,</span>
<span>                              min.band.points<span class="op">=</span><span class="fl">2</span>, change.col<span class="op">=</span><span class="st">"last.two"</span><span class="op">)</span>,</span>
<span>                            trend.table.control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                              year.ranges<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2005</span>,<span class="fl">2006</span><span class="op">:</span><span class="fl">2020</span>,<span class="fl">2021</span><span class="op">:</span><span class="fl">2025</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                            output.type <span class="op">=</span> <span class="st">"word"</span>,</span>
<span>                            output.dir <span class="op">=</span> <span class="st">"Output/CRchum"</span></span>
<span><span class="op">)</span></span></code></pre>
<p>Type <code><a href="reference/NWCTrends-package.html">?NWCTrends</a></code> for instructions for analyzing a data set. The data must be .csv file. Figures will be saved in the <strong>NWCTrends_output</strong> folder, created in your working directory.</p>
</div>
<div class="section level2">
<h2 id="instructions-to-run-your-own-data">Instructions to run your own data<a class="anchor" aria-label="anchor" href="#instructions-to-run-your-own-data"></a>
</h2>
<p>Download the demo data files and duplicate the format (csv or xls). Do not rename the columns. Missing data are entered with a -99. An ESU name and a unique population name (COMMON_POPULATION_NAME) are required. The tables produced by <strong>NWCTrends</strong> only use the BROOD_YEAR, NUMBER_OF_SPAWNERS, and FRACWILD columns. An entry is required for each year. RUN_TIME, SPECIES and MAJOR_POPULATION_GROUP are used to adding labels to plots and tables. BROOD_YEAR is mislabelled. This is simply the Year of sampling.</p>
</div>
<div class="section level2">
<h2 id="modifying-the-tables">Modifying the tables<a class="anchor" aria-label="anchor" href="#modifying-the-tables"></a>
</h2>
<p>Optional. Set the years to use for the analysis using <code>fit.min.year</code> and <code>fit.max.year</code>. If you leave this off, it will use the first year in the data set and the last year in the data set.</p>
<p>In the tables for the geometric means, you can control the table by passing in the list <code>geomean.table.control</code>. For example, you can set the beginning and ending years to be shown in the table. These can be different than <code>fit.min.year</code> and <code>fit.max.year</code>.</p>
<p>For example, you may want to fit to 1990 to 2019 data but only show 5-year geometric means for 1999 to 2018. To do this, you would call the report with</p>
<pre><code><span><span class="fu"><a href="reference/NWCTrends_report.html">NWCTrends_report</a></span><span class="op">(</span>fit.min.year<span class="op">=</span><span class="fl">1990</span>, fit.max.year<span class="op">=</span><span class="fl">2019</span>,</span>
<span>                 geomean.table.control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min.year<span class="op">=</span><span class="fl">1999</span>, max.year<span class="op">=</span><span class="fl">2018</span>, change.col<span class="op">=</span><span class="st">"first.last"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>The <code>change.col</code> argument determines whether the last column is the percent change between the first and last 5-year bands or between the last two bands.</p>
<p>The code will create bands with 5 years in each band starting with min.year. If max.year, would lead to a final band with less than 5 years, then the last band will not have 5 years. If it has fewer than min.band.points, then the last band will be NA. You will need to properly choose min.year and max.year to get the table to look as you want.</p>
<p>You customize the multi-year trend ranges. To do this, you would call the report with for example the following to show the 1990 to 2019 and 2015 to 2019 ranges.</p>
<pre><code><span><span class="fu"><a href="reference/NWCTrends_report.html">NWCTrends_report</a></span><span class="op">(</span>fit.min.year<span class="op">=</span><span class="fl">1990</span>, fit.max.year<span class="op">=</span><span class="fl">2019</span>,</span>
<span>                 trend.table.control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year.ranges<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1990</span><span class="op">:</span><span class="fl">2019</span>, <span class="fl">2015</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>The <strong>2015 NWFSC PNW Salmonid Viability Report</strong> can be assessed via the GitHub repo:</p>
<ul>
<li>
<strong>Viability Report 2015 (PDF)</strong><br><a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2015_Status_Review_Update.pdf" class="external-link uri">https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2015_Status_Review_Update.pdf</a>
</li>
<li>
<strong>Viability Report 2020 (PDF)</strong><br><a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2020_Viability_Report.pdf" class="external-link uri">https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/2020_Viability_Report.pdf</a>
</li>
</ul>
<p>The version of <strong>NWCTrends</strong> used for the original report was <strong>v1.0</strong>.</p>
<p>A standalone PDF of the <strong>Methods</strong> section is also available:</p>
<ul>
<li>
<strong>Methods (PDF)</strong><br><a href="https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/Methods.pdf" class="external-link uri">https://github.com/nwfsc-math-bio/NWCTrends/raw/master/reports/Methods.pdf</a>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="example-output">Example output<a class="anchor" aria-label="anchor" href="#example-output"></a>
</h2>
<p>A report will be generated with figures and tables. <a href="man/figures/example.html">Example report</a></p>
<p>The main figure shows the estimated trends.</p>
<p><img src="reference/figures/main_fig.jpg"></p>
<hr>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>The United States Department of Commerce (DOC) GitHub project code is provided on an ‘as is’ basis and the user assumes responsibility for its use. DOC has relinquished control of the information and no longer has responsibility to protect the integrity, confidentiality, or availability of the information. Any claims against the Department of Commerce stemming from the use of its GitHub project will be governed by all applicable Federal law. Any reference to specific commercial products, processes, or services by service mark, trademark, manufacturer, or otherwise, does not constitute or imply their endorsement, recommendation or favoring by the Department of Commerce. The Department of Commerce seal and logo, or the seal and logo of a DOC bureau, shall not be used in any manner to imply endorsement of any commercial product or activity by DOC or the United States Government.</p>
<hr>
<p><img src="https://raw.githubusercontent.com/nmfs-general-modeling-tools/nmfspalette/main/man/figures/noaa-fisheries-rgb-2line-horizontal-small.png" height="75" alt="NOAA Fisheries"></p>
<p><a href="https://www.commerce.gov/" class="external-link">U.S. Department of Commerce</a> | <a href="https://www.noaa.gov" class="external-link">National Oceanographic and Atmospheric Administration</a> | <a href="https://www.fisheries.noaa.gov/" class="external-link">NOAA Fisheries</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nwfsc-math-bio/NWCTrends/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/nwfsc-math-bio/NWCTrends/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>CC0</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing NWCTrends</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Holmes Elizabeth <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Holmes Elizabeth.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
