<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create the geomean tables — geomean_table • NWCTrends</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create the geomean tables — geomean_table"><meta property="og:description" content="Create the tables with the geomeans for different time periods. Two tables are produced: one of the
smoothed wild and total (total in parentheses) spawners. This function is called from esu_report.Rmd
and is not exported. The min.year, max.year, lenbands, nbands, and min.band.points control the
look of the table and can be controlled in the call to NWCTrends_report() by passing in
geomean.table.control as list.  For example list(min.year=1999) to change the min year shown
from the minimum in the dataset (the default) to 1999.
Note that for the raw geomeans, the years used for the total count geomeans can be different than for the
natural raw geomeans. This happens when there are years that are missing a frac wild number but there is a
total count that year. So the raw geomean divided by the total geomean could be quite different than the
average fraction wild."><meta property="og:image" content="https://nwfsc-math-bio.github.io/NWCTrends/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NWCTrends</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.31</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.0" class="external-link">Version 1.0 2015 VR</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.25" class="external-link">Version 1.25 2020 VR</a>
    </li>
    <li>
      <a href="https://github.com/nwfsc-math-bio/NWCTrends/releases/tag/v1.30" class="external-link">Version 1.30</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Viability PDFs

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../SR_2015.pdf">Viability Report 2015 (PDF)</a>
    </li>
    <li>
      <a href="../Methods.pdf">Methods (PDF)</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nwfsc-math-bio/NWCTrends/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create the geomean tables</h1>
    <small class="dont-index">Source: <a href="https://github.com/nwfsc-math-bio/NWCTrends/blob/HEAD/R/geomean_tables.R" class="external-link"><code>R/geomean_tables.R</code></a></small>
    <div class="hidden name"><code>geomean_table.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create the tables with the geomeans for different time periods. Two tables are produced: one of the
smoothed wild and total (total in parentheses) spawners. This function is called from esu_report.Rmd
and is not exported. The min.year, max.year, lenbands, nbands, and min.band.points control the
look of the table and can be controlled in the call to NWCTrends_report() by passing in
geomean.table.control as list.  For example <code>list(min.year=1999)</code> to change the min year shown
from the minimum in the dataset (the default) to 1999.</p>
<p>Note that for the raw geomeans, the years used for the total count geomeans can be different than for the
natural raw geomeans. This happens when there are years that are missing a frac wild number but there is a
total count that year. So the raw geomean divided by the total geomean could be quite different than the
average fraction wild.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geomean_table</span><span class="op">(</span></span>
<span>  <span class="va">pops</span>,</span>
<span>  <span class="va">mpg</span>,</span>
<span>  <span class="va">total.fit</span>,</span>
<span>  <span class="va">fracwild.fit</span>,</span>
<span>  min.year <span class="op">=</span> <span class="fl">1990</span>,</span>
<span>  max.year <span class="op">=</span> <span class="fl">2014</span>,</span>
<span>  lenbands <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  min.band.points <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  change.col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"last.two"</span>, <span class="st">"first.last"</span><span class="op">)</span>,</span>
<span>  navalue <span class="op">=</span> <span class="st">" "</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-pops">pops<a class="anchor" aria-label="anchor" href="#arg-pops"></a></dt>
<dd><p>which populations to include in the table</p></dd>


<dt id="arg-mpg">mpg<a class="anchor" aria-label="anchor" href="#arg-mpg"></a></dt>
<dd><p>Population group. Shown in the table.</p></dd>


<dt id="arg-total-fit">total.fit<a class="anchor" aria-label="anchor" href="#arg-total-fit"></a></dt>
<dd><p>The matrix of total spawner estimates</p></dd>


<dt id="arg-fracwild-fit">fracwild.fit<a class="anchor" aria-label="anchor" href="#arg-fracwild-fit"></a></dt>
<dd><p>The matrix of fraction wild associated with each total row.</p></dd>


<dt id="arg-min-year">min.year<a class="anchor" aria-label="anchor" href="#arg-min-year"></a></dt>
<dd><p>The minumum year to include in the tables.</p></dd>


<dt id="arg-max-year">max.year<a class="anchor" aria-label="anchor" href="#arg-max-year"></a></dt>
<dd><p>The maximum year to include in the tables. If this is 'mid-band', the rest of the band will be padded with NAs and the band width of the last band will be less than lenbands.</p></dd>


<dt id="arg-lenbands">lenbands<a class="anchor" aria-label="anchor" href="#arg-lenbands"></a></dt>
<dd><p>How many years in each band. Default is 5-years.</p></dd>


<dt id="arg-min-band-points">min.band.points<a class="anchor" aria-label="anchor" href="#arg-min-band-points"></a></dt>
<dd><p>The minimum data points for the geomean to show in a band.</p></dd>


<dt id="arg-change-col">change.col<a class="anchor" aria-label="anchor" href="#arg-change-col"></a></dt>
<dd><p>Either between last 2 bands or 1st and last.</p></dd>


<dt id="arg-navalue">navalue<a class="anchor" aria-label="anchor" href="#arg-navalue"></a></dt>
<dd><p>value to show for NAs</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list with the statesgeomean and rawgeomean data frames (tables).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The code will create bands with lenbands years in each band starting with min.year. If max.year,
would lead to a final band with less than lenbands years, then the last band will not have lenbands
years. If it has fewer than min.band.points, then the last band will be NA.
You will need to properly choose min.year and max.year to get the table to look as you want.</p>
<p>The last column of the tables is the percent change. This can be over the last 2 bands or the first and last
bands. The change.col argument determines which it is.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Eli Holmes, NOAA, Seattle, USA.  eli(dot)holmes(at)noaa(dot)gov</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Holmes Elizabeth.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

